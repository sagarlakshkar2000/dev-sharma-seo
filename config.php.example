<?php

/**
 * config.php — Central site configuration
 *
 * Template file. Copy to config.php and adjust for your server.
 */

// ─── ENVIRONMENT DETECTION ───────────────────────────────────────────────────
$_host = $_SERVER['HTTP_HOST'] ?? $_SERVER['SERVER_NAME'] ?? '';
define('IS_LOCAL', in_array($_host, ['localhost', '127.0.0.1', '::1']));

// ─── BASE PATH ────────────────────────────────────────────────────────────────
$requestUri = $_SERVER['REQUEST_URI'] ?? '';
$scriptName = $_SERVER['SCRIPT_NAME'] ?? '';
$baseDir = str_replace('\\', '/', dirname($scriptName));
if ($baseDir === '/') $baseDir = '';
define('BASE', IS_LOCAL ? $baseDir : '');

// ─── SITE URL ─────────────────────────────────────────────────────────────────
$protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') || ($_SERVER['SERVER_PORT'] ?? 80) == 443 ? "https://" : "http://";
define(
    'SITE_URL',
    IS_LOCAL
        ? $protocol . $_host . BASE
        : 'https://your-production-domain.com'
);

// ─── HELPERS ──────────────────────────────────────────────────────────────────
function asset(string $path): string
{
    return BASE . '/' . ltrim($path, '/');
}

function url(string $path): string
{
    return BASE . '/' . ltrim($path, '/');
}
